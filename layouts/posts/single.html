{{ define "head" }}
  {{ partialCached "meta/inline-postcss.html" (resources.Get "css/pages/article.css") "css/pages/article.css" }}
  {{ if in .Content "<code>" }}
    {{ partialCached "meta/async-postcss.html" (resources.Get "css/highlight.css") "css/highlight.css" }}
  {{ end }}
  {{ partial "seo/blogposting.html" . }}
{{ end }}
{{ define "main" }}
  <article class="article">
    {{ $bkg := .Resources.GetMatch "background.*" }}
    <header class="card header article__header {{ if $bkg }}card--image{{ end }}"{{ if $bkg }} style='background-image:url({{$bkg.RelPermalink}})'{{ end }}>
      <div class="header__content inner">
        <div class="header__text">
          <span class="date">
            {{- if gt .Lastmod .Date  -}}
            Last updated on {{ partial "time.html" .Lastmod }}
            {{- else -}}
            Posted on {{ partial "time.html" .Date }}
            {{- end -}}
          </span>
          <h1 class="block--side card__title">{{.Title}}</h1>
          <p class="card__subtitle">{{.Description}}</p>
          {{ partial "post/tag_list.html" . }}
        </div>

        {{ partial "project/buttons.html" (dict "links" .Params.links "page" .RelPermalink) }}
      </div>
    </header>

    {{ if .Params.toc }}
    <nav class="article__toc article__toc--sidebar">
      <div class="article__toc-inner">
        <h2>Contents <a href="#" title="Back to top">â†¥</a></h2>
        {{ .TableOfContents }}
      </div>
    </nav>
    {{ end }}

    <div class="article__body inner">
      {{ .Content }}
    </div>

    {{ partial "cta_nav.html" . }}
  </article>
{{ end }}
{{ define "footer" }}
<aside class="card subscribe__wrap">
  <div class="inner">
    <h2>Want to read more?</h2>
    <p>
    On this blog I try to write about interesting and weird projects, and my newsletter is no different!
    It includes <strong>early access</strong> to upcoming posts and access to special bonus content.
    No spam, unsubscribe at any time.
    </p>
    {{ partialCached "subscribe-form.html" . }}
  </div>
</aside>
<footer class="contact" id="contact" role="contentinfo">
  {{ with .Params.footer }}
  <small class="disclaimer">{{.}}</small>
  {{ end }}
  {{ partialCached "footer.html" . }}
</footer>
{{ end }}
