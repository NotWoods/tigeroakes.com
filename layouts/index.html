{{ define "head" }}
    {{ partial "meta/inline-postcss.html" (resources.Get "css/pages/home.css" | resources.ExecuteAsTemplate "css/pages/home.css" .) }}
    {{ range (.GetPage "/posts").AlternativeOutputFormats }}
    <link rel="{{.Rel}}" type="{{.MediaType.Type}}" href="{{.Permalink}}" title="{{$.Site.Title}}">
    {{ end }}
{{ end }}
{{ define "main" }}
    <section class="card hero">
        <div class="hero__content">
            <h1 class="home__heading">{{.Title}}</h1>
            <p class="home__subtitle">{{.Params.subtitle | markdownify}}</p>
        </div>
    </section>

    <section class="about">
        <div class="inner about__content">
            <div>{{.Content}}</div>

            {{ with .Resources.GetMatch "profile.jpg" }}
            {{ $1x := .Resize "160x" }}
            {{ $2x := .Resize "320x" }}
            {{ $3x := .Resize "480x" }}
            {{ $4x := .Resize "640x" }}
            <img class="profile" width="160" height="160" sizes="160px" alt="Portrait of Tiger Oakes"
                src="{{$1x.RelPermalink}}"
                srcset="{{$2x.RelPermalink}} 2x, {{$3x.RelPermalink}} 3x, {{$4x.RelPermalink}} 4x">
            {{ end }}
        </div>
    </section>

    <section class="featured-projects projects" id="featured">
        {{ range (.GetPage "projects").Pages }}
        {{ if .Params.feature }}
        <article class="card featured-project" style='{{ partial "project/style.css" . | safeCSS }}'>
            <div class="inner">
                <h3 class="block card__title">{{.Title}}</h3>
                {{ partial "project/tech_list.html" .Params.tech }}
                <p class="card__description">
                    {{.Description | default .Summary}}
                </p>
                {{ partial "project/buttons.html" (dict "links" .Params.links "page" .RelPermalink) }}
            </div>
        </article>
        {{ end }}
        {{ end }}

        {{ partial "project/cta.html" "see_more" }}
    </section>
{{ end }}
{{ define "footer" }}
    <footer class="contact" id="contact" role="contentinfo">
    {{- with .Site.GetPage "/contact" -}}
        {{.Content}}
        {{ with .Site.Data.contact.email }}
        <a href="{{.link}}" class="block block--bottom block--animate contact__link email">
            {{.text | markdownify}}
        </a>
        {{ end }}
        <p>{{ i18n "find_at" }}</p>
        {{ range .Site.Data.contact.social }}
        <p class="contact__link-container">
        <a href="{{.link}}" class="block block--bottom block--animate contact__link">
            {{.text | markdownify}}
        </a>
        </p>
        {{ end }}
    {{- end -}}
    </footer>
{{ end }}
{{ define "end" }}
    {{ $swRegistration := resources.Get "js/service-worker-registration.js" | minify }}
    <script async defer src="{{ $swRegistration.RelPermalink }}"></script>
{{ end }}
