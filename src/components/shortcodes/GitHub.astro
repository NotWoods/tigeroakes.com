---
export interface Props {
  repo: string;
  stars?: boolean;
}

const { repo, stars } = Astro.props as Props;
const repoTitle = repo.split('/').join('/<wbr>');

async function queryJson() {
  const response = await fetch(`https://api.github.com/repos/${repo}`);
  const json = await response.json();
  return json as { stargazers_count: number; description: string };
}
const { stargazers_count, description } = await queryJson();
---

<a class="external-link" href={`https://github.com/${repo}`}>
  <img
    class="external-link__logo"
    loading="lazy"
    src="/contact/github.svg"
    alt="GitHub"
    width="20"
    height="20"
  />
  <h6 class="external-link__title" set:html={repoTitle}></h6>
  <span class="external-link__about">
    {stars ? `${stargazers_count} stars` : description}
  </span>
</a>
