---
import Buttons, { ButtonProps } from '../Buttons.astro';

export interface Props {
  as?: 'header' | 'article';
  class?: string;
  buttonsClass?: string;
  style?: string;
  accent?: string;
  backgroundImage?: string;
  buttons?: readonly ButtonProps[];
}

const {
  as = 'header',
  buttons,
  accent,
  backgroundImage,
  style = '',
  class: className,
  buttonsClass = 'text-lg justify-center'
} = Astro.props as Props;

const classes = [
  'text-slate-200 bg-center bg-cover bg-no-repeat',
];
if (as === 'header') {
  classes.push('p-4 grid-area-header');
}
if (backgroundImage) {
  classes.push('text-shadow');
}
if (className) {
  classes.push(className);
}

const styles = [
  accent && `--accent: ${accent}`,
  backgroundImage && `background-image: url(${backgroundImage})`,
  style,
].filter(Boolean);

const props = {
  class: classes.join(' '),
  style: styles.length > 0 ? styles.join(';') : undefined,
}

const contentClass = 'max-w-site mx-auto p-4 w-full'
---

{as === 'article'
  ? <article {...props}>
      <div class={contentClass}>
        <slot />
        <Buttons class={buttonsClass} {buttons} />
      </div>
    </article>
  : <header {...props}>
      <div class={contentClass}>
        <slot />
        <Buttons class={buttonsClass} {buttons} />
     </div>
    </header>}
