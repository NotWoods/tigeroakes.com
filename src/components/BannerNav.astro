---
import navData from '../data/nav.json';
import Logo from './Logo.astro';

// Banner displayed at the top of the site.
export interface Props {
  logo?: 'default' | 'outline' | 'none';
  current?: string | URL;
  class?: string;
}

const { logo = 'default', current, class: className } = Astro.props as Props;

function isCurrent({ url }: { url: string }) {
  if (!current) return undefined;

  const currentPath = typeof current === 'string' ? current : current.pathname;
  return currentPath.startsWith(url);
}
---

<header
  class:list={[
    'safe-px-4 mx-auto flex max-w-site flex-wrap items-stretch justify-between gap-y-4 py-4',
    className,
  ]}
>
  {logo !== 'none' && <Logo outline={logo === 'outline'} />}
  {logo === 'none' && <div class="h-7 grow" />}

  <nav class="mx-auto flex flex-wrap items-stretch gap-x-2 gap-y-6">
    {
      navData.map((page) => (
        <a
          class="accent-block--bottom relative px-2"
          href={page.url}
          aria-current={isCurrent(page) ? 'page' : undefined}
        >
          {page.name}
        </a>
      ))
    }
  </nav>
</header>
